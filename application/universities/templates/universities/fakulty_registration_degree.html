{% extends 'universities/layout.html' %}

{% block title %} Форма реєстрації ступенів навчання | MARCI {% endblock %}
{% block content %}

    <div class="registration-form flex p-10">
        <div class="card bg-base-200 border-2 border-base-300 p-4 w-1/2">
            <form class="w-auto flex flex-col gap-3" method="post" action="">
                {% csrf_token %}
                <fieldset id="parentDropdown" class="fieldset">
                  <legend class="fieldset-legend">Виберіть ступінь освіти</legend>
                  <select class="select">
                      <option disabled selected>Ступінь освіти</option>
                      <option>Молодший бакалавр</option>
                      <option>Бакалавр</option>
                      <option>Магістр</option>
                      <option>Доктор філології</option>
                      <option>Доктор наук</option>
                      <option>Васяневміє писатикод</option>
                  </select>
                </fieldset>
                <fieldset class="fieldset hide-element" disabled>
                  <legend class="fieldset-legend text-base-content/40 hide-element-text">Скільки років триває навчання</legend>
                  <select class="select">
                      <option disabled selected>Тривалість навчання</option>
                      <option>1</option>
                      <option>2</option>
                      <option>3</option>
                      <option>4</option>
                      <option>5</option>
                  </select>
                </fieldset>
                <fieldset class="fieldset hide-element" disabled>
                  <legend class="fieldset-legend hide-element-text text-base-content/40">Скільки коштуватиме рік навчання? (В долярах)</legend>
                  <input type="text" placeholder="5000" class="input" />
                </fieldset>
            </form>
        </div>
        <div class="h-1/3 items-center flex ml-10">
            <button type="submit" value="submit" id="submitButton" class="btn btn-active btn-success">Success</button>
        </div>
    </div>
        <script>
            document.addEventListener("DOMContentLoaded", (event) => {
                handleInput()
            })

            function handleInput() {
                let submitButton = document.querySelector('#submitButton')
                let inputs = document.querySelectorAll('input');
                let textarea = document.querySelector('textarea');
                let status = true;

                inputs.forEach((input) => {
                    if (input.type == "hidden") {
                        return;
                    }
                    if ( input.value.length <= 0 ) {
                        status = false;
                    }

                });
                if ( textarea.value.length <= 0 ) {
                    status = false;
                }

                if (!status) {
                    submitButton.setAttribute("disabled", "")
                } else {
                    submitButton.removeAttribute("disabled")
                }
            }


            document.addEventListener("DOMContentLoaded", function () {
                const parent = document.getElementById("parentDropdown");
                const hideElements = document.querySelectorAll(".hide-element");
                const hideElementTexts = document.querySelectorAll(".hide-element-text");

                parent.addEventListener("change", function () {
                    hideElements.forEach((el) => {
                        if (parent.value !== "") {
                            el.disabled = false;
                        } else {
                            el.disabled = true;
                            el.value = "";
                        }
                    });

                    hideElementTexts.forEach((el) => {
                        if (parent.value !== "") {
                            el.classList.remove("text-base-content/40");
                            el.classList.add("text-base-content");
                        } else {
                            el.classList.remove("text-base-content");
                            el.classList.add("text-base-content/40");
                        }
                    });
                });
            });
                {% comment %}parent.addEventListener("change", function () {
                  if (parent.value !== "") {
                    child.disabled = false;
                    legend.classList.remove("text-base-content/40");
                    legend.classList.add("text-base-content");
                  } else {
                    child.disabled = true;
                    child.value = "";
                    legend.classList.remove("text-base-content");
                    legend.classList.add("text-base-content/40");
                  }
                });
              });{% endcomment %}
        </script>






{% endblock %}
