{% extends 'universities/layout.html' %}

{% block title %} Форма реєстрації ступенів навчання | MARCI {% endblock %}
{% block content %}
    <form action="" method="post">
        <div class="registration-form flex p-10">
            <div id="container" class="w-1/2">
                <div id="form" class="card bg-base-200 border-2 mb-4 border-base-300 p-4">
                    <div class="w-auto flex flex-col gap-3">
                        {% csrf_token %}
                        <fieldset class="fieldset">
                          <legend class="fieldset-legend">Виберіть ступінь освіти</legend>
                          <select name="degree_type" class="select">
                              <option disabled selected>Ступінь освіти</option>
                              <option>Молодший бакалавр</option>
                              <option>Бакалавр</option>
                              <option>Магістр</option>
                              <option>Доктор філології</option>
                              <option>Доктор наук</option>
                              <option>Васяневміє писатикод</option>
                          </select>
                        </fieldset>
                        <fieldset class="fieldset">
                          <legend class="fieldset-legend text-base-content/40">Скільки років триває навчання</legend>
                          <select name="degree_duration" class="select">
                              <option disabled selected>Тривалість навчання</option>
                              <option>1</option>
                              <option>2</option>
                              <option>3</option>
                              <option>4</option>
                              <option>5</option>
                          </select>
                        </fieldset>
                        <fieldset class="fieldset">
                          <legend class="fieldset-legend text-base-content/40">Скільки коштуватиме рік навчання? (В долярах)</legend>
                          <input name="degree_cost" type="text" placeholder="5000" class="input" />
                        </fieldset>
                    </div>
                </div>
            </div>
            <div class="h-1/3 items-center flex ml-10">
                <button type="button" onclick="addDegree()" class="btn btn-active btn-success">+</button>
            </div>
            <div class="h-1/3 items-center flex ml-10">
                <button type="submit" value="submit" id="submitButton" class="btn btn-active btn-success">Success</button>
            </div>
        </div>
    </form>
        <script>

            let form = null;
            let index = 1;
            let clonedForm = null;
            document.addEventListener("DOMContentLoaded", function () {
                //handleInput()
                form = document.querySelector('#form');
                clonedForm = form.cloneNode(true);
            })

            function addDegree() {
                let container = document.getElementById("container");
                container.appendChild(clonedForm);
                clonedForm = form.cloneNode(true);

                newForm.querySelectorAll('input, select').forEach((el) => {
                    if (el.tagName === 'INPUT') el.value = '';
                    if (el.tagName === 'SELECT') el.selectedIndex = 0;
                });

                // Оновлюємо name-и
                newForm.querySelectorAll('input, select').forEach((el) => {
                    const originalName = el.getAttribute('name');
                    if (originalName) {
                        const newName = `${originalName}_${index}`;
                        el.setAttribute('name', newName);
                    }
                });

                // Додаємо у DOM
                container.appendChild(newForm);
                index++;
            }

        </script>






{% endblock %}
